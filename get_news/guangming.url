<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <!-- 以下meta 兼容移动设备显示 必须加上 -->
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
   <meta content="no-cache" http-equiv="Cache-Control">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" name="viewport">
     <!-- Terren 统计专用meta---------------BEGIN---------- -->
     <meta content="gmsearch" name="catalogs">
      <!-- Terren 统计专用meta---------------END---------- -->
      <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
       <meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport">
        <!-- Bootstrap -->
        <!-- 新 Bootstrap 核心 CSS 文件 -->
        <link href="/search/css/bootstrap.min.css" rel="stylesheet">
         <link href="/search/css/bootstrap-responsive.min.css" rel="stylesheet">
          <link href="/css/index.css" rel="stylesheet">
           <link href="/search/css/search_style.css" rel="stylesheet">
            <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
            <script src="http://img.gmw.cn/js/jquery.js" type="text/javascript">
            </script>
            <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
            <script src="/search/js/bootstrap.min.js">
            </script>
            <script src="/search/js/sear.js">
            </script>
            <script src="/search/js/sethome.js">
            </script>
            <script src="/search/js/gt.js">
            </script>
            <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
            <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
            <!--[if lt IE 9]>
         <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
         <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
      <![endif]-->
            <title>
             光明搜索-光明网 Beta版
            </title>
            <script type="text/javascript">
             $(function() {
		$("#advSearch1").attr("href", "/search.do?advType=news&c=n");
		$("#advSearch2").attr("href", "/search.do?advType=news&c=n");
	});
            </script>
            <style type="text/css">
             #captcha {
	width: 300px;
	display: inline-block;
}

.show {
	display: block;
}

.hide {
	display: none;
}

#notice {
	color: red;
}

label {
	vertical-align: top;
	display: inline-block;
	width: 80px;
	text-align: right;
}

#wait {
	text-align: left;
	color: #666;
	margin: 0;
}

.row-margin-top {
	margin-top: 80px;
}
            </style>
           </link>
          </link>
         </link>
        </link>
       </meta>
      </meta>
     </meta>
    </meta>
   </meta>
  </meta>
 </head>
 <body>
  <!-- 头部 -->
  <!-- 头部 -->
  <div class="text-right">
   <a href="/search.do?advType=news" id="advSearch1">
    高级搜索
   </a>
   |
   <a href="http://www.gmw.cn" target="_blank">
    光明网
   </a>
   |
   <a href="#" onclick="addBookmark();" rel="sidebar" title="光明网_光明搜索">
    加入收藏
   </a>
   |
   <a href="javascript:void(0);" onclick="SetHome(this,'http://www.gmw.cn');">
    设为首页
   </a>
  </div>
  <!-- 导航 -->
  <div class="container">
   <div class="container-fluid">
    <div class="logobox">
     <h1 class="logo">
      <a href="/">
       <img src="/search/img/logo.png"/>
      </a>
      <span style="font-size: 10px">
       Beta版
      </span>
     </h1>
     <ul class="navbox">
      <li>
       <a class="current" href="#">
        新闻
       </a>
      </li>
      <li>
       <a href="javascript:openUrl('/search.do?c=p&amp;q=%E7%85%A4%E6%94%B9%E6%B0%94')">
        图片
       </a>
      </li>
      <li>
       <a href="javascript:openUrl('/search.do?c=v&amp;q=%E7%85%A4%E6%94%B9%E6%B0%94')">
        视频
       </a>
      </li>
      <li>
       <a href="javascript:openUrl('/search.do?c=g&amp;q=%E7%85%A4%E6%94%B9%E6%B0%94')">
        光明日报
       </a>
      </li>
      <!--<li><a href="#">博客</a></li>
					<li><a href="#">社区</a></li>
					<li><a href="#">商城</a></li>
					<li><a href="#">更多</a></li> -->
     </ul>
    </div>
    <!-- 搜索 -->
    <div class="row-fluid">
     <div class="span8">
      <div class="form-group searchbox">
       <form action="/search.do" class="form-search" id="form-search-a" method="post" style="position: relative;">
        <input id="catagory" name="c" type="hidden" value="n"/>
        <input id="currentPage" name="cp" type="hidden" value="1"/>
        <input autocomplete="off" class="form-control" id="gover_search_key" maxlength="150" name="q" search_focus="%E7%85%A4%E6%94%B9%E6%B0%94" type="text" value="%E7%85%A4%E6%94%B9%E6%B0%94">
         <div class="search_suggest1" id="gov_search_suggest">
          <ul>
          </ul>
         </div>
         <div class="btn-group">
          <a class="btn" onclick="submit($('#form-search-a'));">
           <span class="add-on">
            <i class="icon-search">
            </i>
           </span>
           搜索
          </a>
         </div>
         <a class="adv_sear" href="/search.do?advType=news" id="advSearch2">
          高级
         </a>
         <p>
         </p>
        </input>
       </form>
      </div>
     </div>
    </div>
   </div>
  </div>
  <!-- 内容 -->
  <br/>
  <br/>
  <br/>
  <div class="container">
   <div class="container-fluid">
    <div class="row-fluid text-center outer">
     <div class="span8">
      <p class="no_search">
       因您的访问次数过多，请验证后在进行查询。谢谢合作！
       <h4>
       </h4>
      </p>
     </div>
     <div class="span8 row-margin-top" style="margin-left: -25px">
      <label style="font-size: 20px; vertical-align: middle; height: 45px">
       验    证：
      </label>
      <div id="captcha">
       <p class="show" id="wait">
        正在加载验证码......
       </p>
      </div>
      <br>
       <p class="hide" id="notice">
        请先完成验证
       </p>
       <br/>
       <br/>
       <br/>
       <input class="btn" id="submit" type="submit" value="确定">
       </input>
      </br>
     </div>
     <!--/row-->
    </div>
   </div>
  </div>
  <!-- 尾部 -->
  <!-- 尾部 -->
  <div class="footer pt100">
   <p>
    <a href="http://www.gmw.cn/aboutus.htm" target="_black">
     关于光明网
    </a>
    |
    <a href="http://www.gmw.cn/node_46280.htm" target="_black">
     联系我们
    </a>
    |
    <a href="http://www.gmw.cn/node_46279.htm" target="_black">
     法律声明
    </a>
    |
    <a href="http://www.gmw.cn/map.htm" target="_black">
     网站地图
    </a>
   </p>
   <p>
    @2014 光明网版权所有
    <a href="http://www.miibeian.gov.cn/" target="_blank">
     京ICP证101021号
     <img height="17" src="/search/img/logofoot_icon.png" width="13">
     </img>
    </a>
   </p>
  </div>
  <script type="text/javascript">
   function openUrl(url) {
			url = encodeURI(url);
			url = encodeURI(url);
			window.location.href = url;
		}

		//实现搜索输入框的输入提示js类
		function oSearchSuggest(searchFuc) {
			var input = $('#gover_search_key');
			var suggestWrap = $('#gov_search_suggest');
			var key = "";
			var init = function() {
				input.bind('keyup', sendKeyWord);
				input.bind('blur', function() {
					setTimeout(hideSuggest, 100);
				})
			}
			var hideSuggest = function() {
				suggestWrap.hide();
			}

			//发送请求，根据关键字到后台查询
			var sendKeyWord = function(event) {
				if (input.val() == "" || input == " ") {
					suggestWrap.hide();
				}
				var current = suggestWrap.find('li.hover');
				current.click(function() {

				});
				//键盘选择下拉项
				if (suggestWrap.css('display') == 'block'
						&& event.keyCode == 38 || event.keyCode == 40) {
					if (event.keyCode == 38) {
						if (current.length > 0) {
							var prevLi = current.removeClass('hover').prev();
							if (prevLi.length > 0) {
								prevLi.addClass('hover');
								input.val(prevLi.html());
							}
						} else {
							var last = suggestWrap.find('li:last');
							last.addClass('hover');
							input.val(last.html());
						}

					} else if (event.keyCode == 40) {
						if (current.length > 0) {
							var nextLi = current.removeClass('hover').next();
							if (nextLi.length > 0) {
								nextLi.addClass('hover');
								input.val(nextLi.html());
							}
						} else {
							var first = suggestWrap.find('li:first');
							first.addClass('hover');
							input.val(first.html());
						}
					}

					//输入字符
				} else {
					var valText = $.trim(input.val());
					if (valText == '' || valText == key) {
						return;
					}
					searchFuc(valText);
					key = valText;
				}

			}
			//请求返回后，执行数据展示
			this.dataDisplay = function(data) {
				if (data.length <= 0) {
					suggestWrap.hide();
					return;
				}

				//往搜索框下拉建议显示栏中添加条目并显示
				var li;
				var tmpFrag = document.createDocumentFragment();
				suggestWrap.find('ul').html('');
				for (var i = 0; i < data.length; i++) {
					li = document.createElement('LI');
					li.innerHTML = data[i];
					tmpFrag.appendChild(li);
				}
				suggestWrap.find('ul').append(tmpFrag);
				suggestWrap.show();

				//为下拉选项绑定鼠标事件
				suggestWrap.find('li').hover(function() {
					suggestWrap.find('li').removeClass('hover');
					$(this).addClass('hover');

				}, function() {
					$(this).removeClass('hover');
				}).bind('click', function() {
					input.val(this.innerHTML);
					suggestWrap.hide();
				});
			}
			init();
		};

		//实例化输入提示的JS,参数为进行查询操作时要调用的函数名
		var searchSuggest = new oSearchSuggest(sendKeyWordToBack);

		//这是一个模似函数，实现向后台发送ajax查询请求，并返回一个查询结果数据，传递给前台的JS,再由前台JS来展示数据。本函数由程序员进行修改实现查询的请求
		//参数为一个字符串，是搜索输入框中当前的内容
		function sendKeyWordToBack(keyword) {
			var c = $("#catagory").val();
			var obj = {
				"keyword" : keyword,
				"catagory" : c
			};
			$.ajax({
				type : "POST",
				url : "/suggestInfo.do",
				async : true,
				data : obj,
				success : function(data) {
					//var json = eval("("+data+")");
					var key = data.split(",");
					var aData = [];
					for (var i = 0; i < key.length; i++) {
						//以下为根据输入返回搜索结果的模拟效果代码,实际数据由后台返回
						if (key[i] != "") {
							aData.push(key[i]);
						}
					}
					//将返回的数据传递给实现搜索输入框的输入提示js类
					searchSuggest.dataDisplay(aData);
				}
			});
		}

		$.ajax({
			url : "/antiCrawling.do?t=" + (new Date()).getTime(), // 加随机数防止缓存
			type : "get",
			dataType : "json",
			success : function(data) {
				// 调用 initGeetest 初始化参数
				// 参数1：配置参数
				// 参数2：回调，回调的第一个参数验证码对象，之后可以使用它调用相应的接口
				initGeetest({
					gt : data.gt,
					challenge : data.challenge,
					new_captcha : data.new_captcha, // 用于宕机时表示是新验证码的宕机
					offline : !data.success, // 表示用户后台检测极验服务器是否宕机，一般不需要关注
					product : "popup", // 产品形式，包括：float，popup
					width : "100%"
				// 更多配置参数请参见：http://www.geetest.com/install/sections/idx-client-sdk.html#config
				}, handler);
			}
		});

		var handler = function(captchaObj) {
			$("#submit")
					.click(
							function(e) {
								var result = captchaObj.getValidate();
								if (!result) {
									$("#notice").show();
									setTimeout(function() {
										$("#notice").hide();
									}, 2000);
								} else {
									$
											.ajax({
												url : '/verifyCode.do',
												type : 'POST',
												dataType : 'text',
												data : {
													"q" : $("#gover_search_key")
															.val(),
													"c" : $("#catagory").val(),
													"cp" : $("#currentPage")
															.val(),
													geetest_challenge : result.geetest_challenge,
													geetest_validate : result.geetest_validate,
													geetest_seccode : result.geetest_seccode
												},
												success : function(data) {
													if (data == "success") {
														window.location.href = "/search.do?c="
																+ $("#catagory")
																		.val()
																+ "&q="
																+ $(
																		"#gover_search_key")
																		.val()
																+ "&cp="
																+ $(
																		"#currentPage")
																		.val();
													} else if (data == "fail") {
														alert("fail");
														alert('验证失败');
													}
												}
											})
								}
								e.preventDefault();
							});
			// 将验证码加到id为captcha的元素里，同时会有三个input的值用于表单提交
			captchaObj.appendTo("#captcha");
			captchaObj.onReady(function() {
				$("#wait").hide();
			});
			// 更多接口参考：http://www.geetest.com/install/sections/idx-client-sdk.html
		};
  </script>
  <!-- Terren Statistics ------------------------BEGIN -------- -->
  <script type="text/javascript">
   document
				.write(unescape("%3Cscript src='http://cl.webterren.com/webdig.js?z=7' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
   wd_paramtracker("_wdxid=000000000000000000000000000000000000000000")
  </script>
  <!-- Terren Statistics ------------------------END -------- -->
  <!-- Google Statistics ------------------------BEGIN -------- -->
  <script type="text/javascript">
   (function(i, s, o, g, r, a, m) {
			i['GoogleAnalyticsObject'] = r;
			i[r] = i[r] || function() {
				(i[r].q = i[r].q || []).push(arguments)
			}, i[r].l = 1 * new Date();
			a = s.createElement(o), m = s.getElementsByTagName(o)[0];
			a.async = 1;
			a.src = g;
			m.parentNode.insertBefore(a, m)
		})(window, document, 'script',
				'//www.google-analytics.com/analytics.js', 'ga');
		ga('create', 'UA-20947729-1', 'auto');
		ga('require', 'displayfeatures');
		ga('send', 'pageview');
  </script>
  <!-- Google Statistics ------------------------END -------- -->
  <!-- AR Statistics -------------------BEGIN-------- -->
  <script type="text/javascript">
   _atrk_opts = {
			atrk_acct : "4+gli1aUCm00OA",
			domain : "gmw.cn",
			dynamic : true
		};
		(function() {
			var as = document.createElement('script');
			as.type = 'text/javascript';
			as.async = true;
			as.src = "https://d31qbv1cthcecs.cloudfront.net/atrk.js";
			var s = document.getElementsByTagName('script')[0];
			s.parentNode.insertBefore(as, s);
		})();
  </script>
  <noscript>
   <img alt="" height="1" src="https://d5nxst8fruw4z.cloudfront.net/atrk.gif?account=4+gli1aUCm00OA" style="display: none" width="1"/>
  </noscript>
  <!-- AR Statistics-------------------END -------- -->
 </body>
</html>
